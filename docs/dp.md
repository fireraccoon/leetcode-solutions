# dynamic programming collection

## [5.最长回文子串](../src/5.最长回文子串_2.java)

## [42.接雨水](../src/42.接雨水_1.java)

## [44.通配符匹配](../src/44.通配符匹配.java)

## [53.最大子数组和](../src/53.最大子数组和_1.java)

## 62.不同路径

1. [时间O(mn)，空间O(mn)](../src/62.不同路径_1.java)

2. [时间O(mn)，空间O(n)](../src/62.不同路径_2.java)

## 63.不同路径II

1. [空间O(mn)](../src/63.不同路径-ii_1.java)

2. [空间O(n)](../src/63.不同路径-ii_2.java)

## [64.最小路径和](../src/64.最小路径和.java)

## [72.编辑距离](../src/72.编辑距离.java)

## [87.扰乱字符串](../src/87.扰乱字符串.java)

## [91.解码方法](../src/91.解码方法.java)

## [95.不同的二叉搜索树-ii](../src/95.不同的二叉搜索树-ii.java)

## [96.不同的二叉搜索树](../src/96.不同的二叉搜索树.java)

$dp[n] = dp[0]*dp[n - 1] + dp[n]*dp[n - 2] + ... + dp[n - 1]*dp[0]$

## 97.交错字符串

1. [时间 $O(mn)$，空间 $O(mn)$](../src/97.交错字符串_1.java)

2. [时间 $O(mn)$，空间 $O(n)$](../src/97.交错字符串.java)

## 115.不同的子序列

1. [时间 $O(mn)$，空间 $O(mn)$](../src/115.不同的子序列_1.java)

2. [时间 $O(mn)$，空间 $O(n)$](../src/115.不同的子序列.java)

## 120.三角形最小路径和

1. [时间 $O(n^2)$，空间 $O(n^2)$](../src/120.三角形最小路径和_1.java)

2. [时间 $O(n^2)$，空间 $O(n)$](../src/120.三角形最小路径和.java)

## [121.买卖股票的最佳时机](../src/121.买卖股票的最佳时机.java)

## 122.买卖股票的最佳时机-ii

1. [时间 $O(n)$，空间 $O(n)$](../src/122.买卖股票的最佳时机-ii_3.java)

2. [时间 $O(n)$，空间 $O(1)$](../src/122.买卖股票的最佳时机-ii_2.java)

## 123.买卖股票的最佳时机-iii

1. [时间 $O(n)$，空间 $O(n)$](../src/123.买卖股票的最佳时机-iii_1.java)

2. [时间 $O(n)$，空间 $O(1)$](../src/123.买卖股票的最佳时机-iii.java)

## [131.分割回文串](../src/131.分割回文串.java)

动态规划$\rightarrow$回溯构造解

## 132.分割回文串-ii

1. [动态规划$\rightarrow$回溯构造解](../src/132.分割回文串-ii_2.java)`超时`

2. [动态规划$\rightarrow$广搜构造解](../src/132.分割回文串-ii_1.java)`超时`

3. [两次动态规划](../src/132.分割回文串-ii.java)

## [139.单词拆分](../src/139.单词拆分.java)

## 152.乘积最大子数组

1. [时间 $O(n)$，空间 $O(n)$](../src/152.乘积最大子数组_1.java)

2. [时间 $O(n)$，空间 $O(1)$](../src/152.乘积最大子数组.java)

## 174.地下城游戏

骑士救公主不符合**最优子结构**，因为从一开始考虑骑士血量，不能保证后续遇到的血包对后续路径的增益。

骑士杀出重围符合**最优子结构**，因为从公主处开始考虑骑士血量，可以保证在返回时遇到的血包对返回路径的影响。

1. [时间 $O(mn)$，空间 $O(mn)$](../src/174.地下城游戏_1.java)

2. [时间 $O(mn)$，空间 $O(n)$](../src/174.地下城游戏.java)

## 188.买卖股票的最佳时机-iv

1. [时间 $O(nk)$，空间 $O(nk)$](../src/188.买卖股票的最佳时机-iv_1.java)

2. [时间 $O(nk)$，空间 $O(k)$](../src/188.买卖股票的最佳时机-iv.java)

## 198.打家劫舍

1. [时间 $O(n)$，空间 $O(n)$](../src/198.打家劫舍_1.java)

2. [时间 $O(n)$，空间 $O(1)$](../src/198.打家劫舍.java)

## 213.打家劫舍-ii

1. [时间 $O(n)$，空间 $O(n)$](../src/213.打家劫舍-ii_1.java)

2. [时间 $O(n)$，空间 $O(1)$](../src/213.打家劫舍-ii.java)

## [214.最短回文串](../src/214.最短回文串_4.java)

## 221.最大正方形

1. [时间 $O(mn)$，空间 $O(mn)$](../src/221.最大正方形_1.java)

2. [时间 $O(mn)$，空间 $O(n)$](../src/221.最大正方形.java)

## 233.数字1的个数

数位 DP。

定义状态 $dp_i$ 表示区间 $[0,10^i-1]$ 中数字 $1$ 的个数。则 $$dp_i=dp_{i-1}*10+10^{i-1}$$ 从高位到低位枚举每一位数位 $digit$，可知一定有 $digit*dp_{i-1}$ 的 $1$；此外，还有 $n\%10^i$ 的数需要继续分情况讨论：

- 当前位为 $1$，那么有 $n\%10^i+1$ 的 $1$；

- 当前位为 $[2,9]$，那么有 $10^i$ 的 $1$。

1. [时间 $O(\log n)$，空间 $O(\log n)$](../src/233.数字1的个数_1.java)

2. [时间 $O(\log n)$，空间 $O(1)$](../src/233.数字1的个数.java)

## 238.除自身以外数组的乘积

1. [借助答案空间 $O(n)$](../src/238.除自身以外数组的乘积_1.java)

2. [不借助答案空间](../src/238.除自身以外数组的乘积.java)

## [241.为运算表达式设计优先级](../src/241.为运算表达式设计优先级.java)

## [264.丑数-ii](../src/264.丑数-ii.java)

使用三个指针记录当前最小的分别为 $\{2,3,5\}$ 倍数的丑数位置，每次将三个指针分别乘以 $2,3$ 和 $5$，取乘积最小的数作为下一个丑数 $a$，并把所得乘积等于 $a$ 的指针的值都 $+1$，从而排除掉重复的丑数。

## [279.完全平方数](../src/279.完全平方数_1.java)

$$f[i]=1+\min_{j=1}^{\lfloor\sqrt{i}\rfloor}{f[i-j^2]}$$

## [300.最长递增子序列](../src/300.最长递增子序列_1.java)

## [303.区域和检索-数组不可变](../src/303.区域和检索-数组不可变.java)

前缀和实现区间求和。

## [304.二维区域和检索-矩阵不可变](../src/304.二维区域和检索-矩阵不可变.java)

二维前缀和实现子矩阵求和。

## 309.买卖股票的最佳时机含冷冻期

由于可以同时买多只股票，故只需考虑冷冻期（即刚好卖出股票的时候）不能继续买股票，冷冻期得转移到可买的状态。

1. [时间 $O(n)$，空间 $O(n)$](../src/309.买卖股票的最佳时机含冷冻期_1.java)

2. [时间 $O(n)$，空间 $O(1)$](../src/309.买卖股票的最佳时机含冷冻期.java)

## [312.戳气球](../src/312.戳气球.java)

每次添加一个气球，可以将问题转化为：在 $[i,j]$ 区间内添加一个气球，使得最终得分最大。定义状态 $dp[i][j]$ 表示区间 $[i,j]$ 内添加气球的最大得分，状态转移方程为 $$dp[i][j]=\max_{k=i}^{j}{dp[i][k-1]+dp[k+1][j]+nums[i-1]*nums[k]*nums[j+1]}$$

## [313.超级丑数](../src/313.超级丑数.java)

分析同 [264.丑数-ii](../src/264.丑数-ii.java)。

## [322.零钱兑换](../src/322.零钱兑换.java)

## [334.递增的三元子序列](../src/334.递增的三元子序列_1.java)

## [338.比特位计数](../src/338.比特位计数.java)

## 343.整数拆分

1. [动态规划 + 枚举](../src/343.整数拆分_2.java)

    - 时间复杂度 $O(n^2)$。

    - 空间复杂度 $O(n)$。

2. [动态规划 + 优化枚举](../src/343.整数拆分_1.java)

    - 时间复杂度 $O(n)$。

    - 空间复杂度 $O(1)$。

## 392.判断子序列

1. [时间 $O(m\times n)$，空间 $O(m\times n)$](../src/392.判断子序列_2.java)

2. [时间 $O(m\times|\Sigma|+n)$，空间 $O(m\times|\Sigma|)$](../src/392.判断子序列.java)，其中 $|\Sigma|$ 表示字符集大小，$m$ 表示字符串长度。如果是计算 $k$ 个平均长度为 $n$ 的字符串是否为 $t$ 的子序列，则时间复杂度为 $O(m\times|\Sigma|+k\times n)$。

## [427.建立四叉树](../src/427.建立四叉树_1.java)

前缀和算矩阵区间和，乘法及和比较判断子矩阵元素是否相同。

## [435.无重叠区间](../src/435.无重叠区间_1.java)

设排完序后这 $n$ 个区间的左右端点分别为 $l_0, \cdots, l_{n-1}$ 以及 $r_0, \cdots, r_{n-1}$
，那么我们令 $f_i$ 表示「以区间 $i$ 为最后一个区间，可以选出的区间数量的最大值」，状态转移方程即为：

$$f_i=\max_{j<i\wedge r_j\leq l_i}\{f_j\}+1$$

## [437.路径总和 III](../src/437.路径总和-iii.java)

`前缀和` + `深搜`。

## [509.斐波那契数](../src/509.斐波那契数_2.java)

## [724.寻找数组的中心下标](../src/724.寻找数组的中心下标.java)

## 714.买卖股票的最佳时机含手续费

1. [时间 $O(n)$，空间 $O(n)$](../src/714.买卖股票的最佳时机含手续费_2.java)

2. [时间 $O(n)$，空间 $O(1)$](../src/714.买卖股票的最佳时机含手续费_1.java)

## 746.使用最小花费爬楼梯

1. [时间复杂度 $O(n)$，空间复杂度 $O(n)$](../src/746.使用最小花费爬楼梯_1.java)

2. [时间复杂度 $O(n)$，空间复杂度 $O(1)$](../src/746.使用最小花费爬楼梯.java)

## [768.最多能完成排序的块-ii](../src/768.最多能完成排序的块-ii_1.java)

## 790.多米诺和托米诺平铺

1. [时间复杂度 $O(n^2)$，空间复杂度 $O(n)$](../src/790.多米诺和托米诺平铺_2.java)

    $$f(n)=\left\{\begin{aligned}
        & 1, & n=0或n=1 \\
        & 2, & n=2 \\
        & f(n-1)+f(n-2)+(f(n-3)+\cdots+f(0))\times2, & n\geq3
    \end{aligned}\right.$$

2. [时间复杂度 $O(n)$，空间复杂度 $O(1)$](../src/790.多米诺和托米诺平铺_1.java)

    $$f(n)=f(n-1)+f(n-2)+(f(n-3)+\cdots+f(0))\times2\cdots\cdots(1)\\
    f(n-1)=f(n-2)+f(n-3)+(f(n-4)+\cdots+f(0))\times2\cdots\cdots(2) \\
    (1)-(2)：f(n)-f(n-1)=f(n-1)+f(n-3)$$

    整理得：

    $$f(n)=\left\{\begin{aligned}
        & 1, & n=0或n=1 \\
        & 2, & n=2 \\
        & f(n-1)\times2+f(n-3), & n\geq3
    \end{aligned}\right.$$

## 918.环形子数组的最大和

1. [时间复杂度 $O(n)$，空间复杂度 $O(n)$](../src/918.环形子数组的最大和_2.java)

    分为两种情况：

    - 最大子数组不跨越数组首尾元素，即最大子数组 $[i,j]$ 在 $[0,n-1]$ 区间内；

    - 最大子数组跨越数组首尾元素，即最大子数组在 $[0,i]$ 和 $[j,n-1]$ 区间内。

2. [时间复杂度 $O(n)$，空间复杂度 $O(1)$](../src/918.环形子数组的最大和.java)

    找最大子数组及最小子数组。

## [1004.最大连续1的个数 III](../src/1004.最大连续-1-的个数-iii_1.java)

`前缀和` + `二分查找`。

## 1137.第 N 个泰波那契数

1. [时间复杂度 $O(n)$，空间复杂度 $O(n)$](../src/1137.第-n-个泰波那契数_1.java)

2. [时间复杂度 $O(n)$，空间复杂度 $O(1)$](../src/1137.第-n-个泰波那契数.java)

## [1143.最长公共子序列](../src/1143.最长公共子序列.java)

## [1480.一维数组的动态和](../src/1480.一维数组的动态和.java)

## 1493.删掉一个元素以后全为 1 的最长子数组

1. [保存左部到当前位置最长的全 1 数组长度](../src/1493.删掉一个元素以后全为-1-的最长子数组_2.java)

    - 时间复杂度 $O(n)$。

    - 空间复杂度 $O(n)$。

2. [双 dp 优化](../src/1493.删掉一个元素以后全为-1-的最长子数组_1.java)

    记 $p_1(i)$ 为「以第 iii 位结尾的最长连续全 $1$ 子数组」，递推式为：
    $$p_1(i)=
    \left\{
        \begin{aligned}
            & 0, & a_i=0 \\
            & p_1(i-1)+1, & a_i=1
        \end{aligned}
    \right.$$

    同时，我们记 $p_2(i)$ 为「以第 iii 位结尾，并且可以在某个位置删除一个 $0$ 的最长连续全 $1$ 子数组」。注意这里我们规定了只删除 $0$，而不是任意一个元素，这是因为只要数组中的元素不全为 $1$，那么删除 $1$ 就没有任何意义。$p_2(i)$ 的递推式为：
    $$p_2(i)=
    \left\{
        \begin{aligned}
            & p_1(i-1), & a_i=0 \\
            & p_2(i-1)+1, & a_i=1
        \end{aligned}
    \right.$$

    最后的答案即为 $p_2(i)$ 中的最大值。当遇到数组中的元素全为 $1$ 的特殊情况时，我们需要将答案减去 $1$。注意到递推式中所有的 $p_1(i), p_2(i)$ 只和 $p_1(i-1), p_2(i-1)$ 相关，因此我们可以直接使用两个变量进行递推，减少空间复杂度。

    - 时间复杂度 $O(n)$。

    - 空间复杂度 $O(1)$。

## [1732.找到最高海拔](../src/1732.找到最高海拔.java)

`前缀和`。

## [面试题 08.01. 三步问题](../cn/Java/_____08_01_Three_Steps_Problem_LCCI_1/Solution.java)

## [面试题 08.02. 迷路的机器人](../cn/Java/_____08_02_Robot_in_a_Grid_LCCI/Solution.java)

## 面试题 08.11. 硬币

1. [完全背包问题变种：求方案数](../cn/Java/_____08_11_Coin_LCCI_2/Solution.java)

    状态转移方程：

    $$f(i,v)=\sum_{j = 0}^{k}f(i-1,v-j\times c_i)\,,\,k=\lfloor\frac{v}{c_i}\rfloor$$

    即枚举每一个硬币 $c_i$ 的个数 $j$ 加入后对组合总数的影响。

    时间复杂度为 $O(L\times n^2)$，其中 $L$ 为硬币的种类数量。

2. [进一步优化](../cn/Java/_____08_11_Coin_LCCI_1/Solution.java)

    对于状态转移方程 $$f(i,v)=\sum_{j=0}^{k}f(i-1,v-j\times c_i)\,,\,k=\lfloor\frac{v}{c_i}\rfloor\cdots\cdots(1)$$

    $$f(i,v-c_i)=\sum_{j=0}^{k}f(i-1,v-(j+1)\times c_i)\,,\,k=\lfloor\frac{v}{c_i}\rfloor-1\cdots\cdots(2)$$

    $(1)-(2)$，有 $$f(i,v)-f(i,v-c_i)=f(i-1,v)$$

    即 $$f(i,v)=f(i-1,v)+f(i,v-c_i)$$

    也就是之前硬币到金额 $v$ 的所有方案数（不考虑当前硬币），加上当前硬币多考虑一个该硬币的方案数。

    时间复杂度优化到 $O(L\times n)$，其中 $L$ 为硬币的种类数量；同时，可以利用压缩数组优化空间。

## [面试题 08.13. 堆箱子](../cn/Java/_____08_13_Pile_Box_LCCI/Solution.java)

排序保证小的箱子（可以是宽度小，也可以是深度小）在前面已经考虑过了，后续枚举考虑加入某个大箱子前面可行的高度，取能加入当前箱子后的最大高度。

## [面试题 08.14. 布尔运算](../cn/Java/_____08_14_Boolean_Evaluation_LCCI/Solution.java)

区间 DP，枚举每个区间长度及区间内分割点。

## [面试题 16.17. 连续数列](../cn/Java/_____16_17_Contiguous_Sequence_LCCI_1/Solution.java)

## [面试题 17.09. 第 k 个数](../cn/Java/_____17_09_Get_Kth_Magic_Number_LCCI/Solution.java)

利用指针移动保证能获得最小的下一个数。

## 面试题 17.13. 恢复空格

1. [字符串哈希 + 动态规划](../cn/Java/_____17_13_Re_Space_LCCI_1/Solution.java)

2. [字典树（字符串反向） + 动态规划](../cn/Java/_____17_13_Re_Space_LCCI/Solution.java)

## [面试题 17.16. 按摩师](../cn/Java/_____17_16_The_Masseuse_LCCI/Solution.java)

## [面试题 17.21. 直方图的水量](../cn/Java/_____17_21_Volume_of_Histogram_LCCI_2/Solution.java)

同 [42.接雨水](../src/42.接雨水_1.java)

## [面试题 17.23. 最大黑方阵](../cn/Java/_____17_23_Max_Black_Square_LCCI/Solution.java)

## 面试题 17.24. 最大子矩阵

1. [前缀和、时间复杂度 $O(m^2\times n^2)$](../cn/Java/_____17_24_Max_Submatrix_LCCI_1/Solution.java)

2. [前缀和、时间复杂度 $O(m^2\times n)$](../cn/Java/_____17_24_Max_Submatrix_LCCI/Solution.java)
